<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Memory usage" href="memory_usage.html" /><link rel="prev" title="What is discrete event simulation?" href="what_is_discrete_event_simulation.html" />

    <link rel="shortcut icon" href="_static/favicon_discrevpy.png"/><meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>Practical tips - discrevpy 1.0.3 documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">discrevpy 1.0.3 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">discrevpy 1.0.3 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="short_examples.html">Short examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="long_examples.html">Long examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_is_discrete_event_simulation.html">What is discrete event simulation?</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Practical tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory_usage.html">Memory usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/snkas/discrevpy/blob/master/LICENSE">MIT license</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/snkas/discrevpy">GitHub repository</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="practical-tips">
<h1>Practical tips<a class="headerlink" href="#practical-tips" title="Permalink to this headline">¶</a></h1>
<div class="section" id="speed-up-event-execution-the-most-likely-bottleneck">
<h2>Speed up event execution: the most likely bottleneck<a class="headerlink" href="#speed-up-event-execution-the-most-likely-bottleneck" title="Permalink to this headline">¶</a></h2>
<p>Generally, insertion of new events into the event queue is not the bottleneck.
Rather the time it takes to execute the events is the more likely dominant time factor.
In an event execution, any arbitrary computation can be done. However, although
simulation time does not progress within the event’s execution, wallclock time does
– which in the end we use to ascribe a simulation “being slow”. As such, any
algorithm or data structure interaction performed in an event execution should
have its time complexity thoughtfully considered.</p>
<ul>
<li><p><strong>Strive for O(1) or O(log n) time complexity</strong></p>
<p>An event type with a slow runtime (especially if frequently inserted/executed) can
slow down a simulation significantly. For instance, if there is an arrival
of packets into a queue of 100000 elements, it is prudent that the queue insertion
is O(1) or O(log n) at worse.  Similarly, allocating or deallocating large amounts
of memory can be time consuming. Discrete event simulation is not magic, it is
merely the simulation of time.</p>
</li>
<li><p><strong>Pre-process/pre-calculate as much as possible</strong></p>
<p>If there are values which can be calculated beforehand which are independent of the
simulation outcome itself, it is often worthwhile to separately generate these
and load them in at the start of each run. For example, if the simulation involves
shortest path routing over a graph, one can calculate the routing state in advance
(e.g., using Floyd-Warshall). Depending on the task, the pre-calculation might possibly be
parallelizable over many machines, or could be done with a more convenient framework
or programming language (with e.g., better libraries available or hardware acceleration).</p>
</li>
</ul>
</div>
<div class="section" id="regulate-event-queue-size">
<h2>Regulate event queue size<a class="headerlink" href="#regulate-event-queue-size" title="Permalink to this headline">¶</a></h2>
<p>Insertion into the event queue is O(log n), and as such is likely not the bottleneck.
Of course, if the event queue becomes increasingly large, e.g., reaching 1’000’000 or more events,
it can become a substantial overhead. Irrespective of whether it is event execution or event insertion
which is the dominant time factor, the key mantra is the same: <strong>only insert events if it is necessary.</strong></p>
<ul>
<li><p><strong>Do not pre-plan all events of a process which is regenerative</strong></p>
<p>For instance, suppose every 1ms a message from A to B is sent. Don’t insert for the entire
duration of the simulation (e.g., 100s) all events (e.g., 100’000) but instead insert one, which
at the end of its execution inserts the next one 1ms in the future.</p>
</li>
<li><p><strong>Be wary of inserting many far-in-the-future events</strong></p>
<p>For example, if there are 200’000 events occurring at t=100s, and they are scheduled at the start of the
simulation, then for the entire simulation time interval of [0, 100s), insertion into the event queue will be slow.
If it is possible, one could group these 200’000 events together by scheduling a single event at t=99s which only
at that moment schedules the 200’000 events.</p>
</li>
<li><p><strong>Group or aggregate events if the model accuracy loss (if any) is acceptable</strong></p>
<p>It might be too time consuming to update the state at the finest time granularity desirable.
At the cost of model accuracy, one can instead operate at coarser time granularity, possibly
grouping together or aggregating the changes that occurred. For example, one can have
a regenerative event in a simulation time interval (e.g., 10ms) that applies the changes in batch.</p>
</li>
<li><p><strong>Leave as much as possible to post-processing</strong></p>
<p>One can always save data in memory and after the simulation is run process them. This is especially true for the
collection of logs or statistics. In post-processing, one can go over the stored data in a manner more efficient
(e.g., parallelized over many machines) or convenient (e.g., using another framework or programming language).</p>
</li>
<li><p><strong>Be careful of events generating events spiraling out of control</strong></p>
<p>Events creating other events is a key concept of discrete event simulation. However, be aware that
this does not spiral out of control: it is not recommended to insert new events continuously at a very
small future time scale. This can even occur accidentally: zero is a valid future time, indicating
it needs to be execute in the same time step as the event being executed right now. One might use
an integer division (e.g., <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">=</span> <span class="pre">10</span> <span class="pre">//</span> <span class="pre">100</span></code>) (or floor operation) to calculate delay, which will round down to zero
– thus if it always schedules itself again in the future this can lead to an infinite loop as
simulation time never progresses. Discrete event simulation time has a fixed time granularity (known in advance):
if the granularity is 1 nanosecond then it is impossible to schedule an event 0.3 nanoseconds in the future:
it must be either 0 or 1 ns.</p>
</li>
</ul>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="memory_usage.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Memory usage</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="what_is_discrete_event_simulation.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">What is discrete event simulation?</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, snkas
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/practical_tips.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Practical tips</a><ul>
<li><a class="reference internal" href="#speed-up-event-execution-the-most-likely-bottleneck">Speed up event execution: the most likely bottleneck</a></li>
<li><a class="reference internal" href="#regulate-event-queue-size">Regulate event queue size</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>